<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Message for Malaika</title>
    <!-- Load Tailwind CSS for styling and responsiveness -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Font Awesome for Heart Icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Load Tone.js for romantic background music -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <style>
        /* Custom styles for animations and aesthetics */
        :root {
            --primary-pink: #ff69b4; /* Hot Pink */
            --secondary-purple: #8a2be2; /* Blue Violet */
            --bg-dark: #12002f; /* Deep Violet Background */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
        }
        .text-shadow-custom {
            /* Adjusted for a subtle but vibrant glow */
            text-shadow: 0 0 8px var(--primary-pink), 0 0 15px var(--secondary-purple);
        }
        .animated-text span {
            display: inline-block;
            animation: wave 1.5s infinite alternate;
            color: white; /* Default color, overwritten by Tailwind for specific pages */
        }
        .animated-text.page-1 span {
            color: var(--primary-pink);
        }
        .animated-text.page-2 span {
            color: #ffcc00; /* Gold */
        }
        .animated-text.page-3 span {
            color: #39ff14; /* Neon Green */
        }
        .animated-text.page-4 span {
            color: #ff1493; /* Deep Pink */
        }
        @keyframes wave {
            0% { transform: translateY(0px) rotate(0deg); }
            100% { transform: translateY(-5px) rotate(1deg); }
        }
        /* Heart Animation for Page 1 */
        .heart {
            position: absolute;
            font-size: 20px;
            color: var(--primary-pink);
            pointer-events: none;
            opacity: 0;
            animation: sprinkle 4s linear infinite;
        }
        @keyframes sprinkle {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--x-end), -100vh) scale(0.2); opacity: 0; }
        }

        /* Confetti Animation for Page 3 */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: transparent;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
            animation: fall 3s ease-in forwards;
            z-index: 100;
        }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        /* Custom Button Style */
        .btn-romantic {
            /* Increased padding for easier touch on mobile */
            @apply px-10 py-4 rounded-full font-bold transition duration-300 transform hover:scale-105 shadow-xl text-lg;
            background-image: linear-gradient(45deg, var(--primary-pink), var(--secondary-purple));
            color: white;
            border: 2px solid white;
        }
        .btn-leave {
             @apply px-10 py-4 rounded-full font-bold transition duration-300 transform hover:scale-105 shadow-xl bg-gray-700 text-gray-300 border-2 border-gray-500 text-lg;
        }
    </style>
</head>
<body class="overflow-hidden">

    <!-- Main App Container: min-h-screen ensures it takes full height, p-4 adds mobile margin -->
    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-6 text-center">

        <!-- Page 1: Introduction and Hearts -->
        <div id="page-1" class="page flex flex-col items-center justify-center space-y-10 w-full max-w-sm transition-opacity duration-1000">
            <!-- Responsive Font Size: text-4xl on mobile, scaling up to 7xl on desktop -->
            <h1 class="text-4xl sm:text-5xl md:text-7xl font-extrabold animated-text page-1 text-shadow-custom leading-tight">
                Hii Malaika, I wanna tell something...
            </h1>
            <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6 w-full max-w-xs">
                <button id="continue-btn" class="btn-romantic w-full">
                    Continue
                </button>
                <button id="leave-btn" class="btn-leave w-full">
                    Leave
                </button>
            </div>
        </div>

        <!-- Page 2: Proposal -->
        <div id="page-2" class="page hidden flex-col items-center justify-center space-y-10 w-full max-w-sm transition-opacity duration-1000">
            <div class="text-white">
                <p class="mb-8 text-4xl animated-text page-2 text-shadow-custom leading-tight">
                    Malaika,
                </p>
                <!-- Text sizes adjusted to fit nicely on a narrow mobile screen -->
                <p class="text-xl sm:text-2xl md:text-4xl leading-relaxed font-medium text-yellow-300 mb-6">
                    You light up my life, and every moment with you is a gift.
                </p>
                <!-- Proposal text stands out -->
                <p class="text-4xl sm:text-5xl md:text-7xl mt-12 mb-12 text-shadow-custom text-red-500 animate-pulse leading-snug">
                    Will you be mine forever?
                </p>
                <p class="text-lg font-light text-purple-300 mt-6">
                    — Masshaf
                </p>
            </div>
            <button onclick="nextPage(3)" class="btn-romantic text-xl">
                YES! (Click to Celebrate!)
            </button>
        </div>

        <!-- Page 3: Congratulations and Crackers/Confetti -->
        <div id="page-3" class="page hidden flex-col items-center justify-center space-y-10 w-full max-w-sm transition-opacity duration-1000">
             <!-- Responsive Font Size: text-5xl on mobile, scaling up to 8xl on desktop -->
             <h1 class="text-5xl sm:text-6xl md:text-8xl font-black animated-text page-3 text-shadow-custom leading-tight">
                CONGRATULATIONS!
            </h1>
            <p class="text-xl sm:text-2xl md:text-3xl font-semibold text-green-400">
                This is the happiest moment! Let's celebrate!
            </p>
            <button onclick="nextPage(4)" class="btn-romantic text-xl">
                Next
            </button>
        </div>

        <!-- Page 4: Final Message -->
        <div id="page-4" class="page hidden flex-col items-center justify-center space-y-10 w-full max-w-sm transition-opacity duration-1000">
             <!-- Responsive Font Size: text-6xl on mobile, scaling up to 9xl on desktop -->
             <h1 class="text-5xl sm:text-6xl md:text-9xl font-black animated-text page-4 text-shadow-custom leading-tight">
                LOVE YOU SOO MUCH! <i class="fas fa-heart ml-2 text-red-600 animate-bounce"></i>
            </h1>
            <p class="text-xl text-white mt-10">
                Looking forward to our journey together. ❤️
            </p>
        </div>

    </div>

    <script>
        // --- Global Variables and Setup ---
        const pages = [
            document.getElementById('page-1'),
            document.getElementById('page-2'),
            document.getElementById('page-3'),
            document.getElementById('page-4')
        ];
        let synth;
        let isMusicPlaying = false;

        // Function to create a simple romantic synth sound with Tone.js
        function startMusic() {
            if (isMusicPlaying) return;

            // Simple poly-synth
            synth = new Tone.PolySynth(Tone.AMSynth, {
                oscillator: { type: 'sine' },
                envelope: {
                    attack: 2,
                    decay: 0.5,
                    sustain: 0.8,
                    release: 4
                },
                volume: -10 // Keep it gentle
            }).toDestination();

            // A simple, sustained romantic chord (C Major 7)
            const notes = ["C4", "E4", "G4", "B4"];
            synth.triggerAttackRelease(notes, "8m"); // Play for 8 measures
            isMusicPlaying = true;
        }

        function stopMusic() {
            if (synth) {
                synth.releaseAll();
                synth.dispose();
                isMusicPlaying = false;
            }
        }

        // --- Page Transition Logic ---
        function showPage(index) {
            pages.forEach((page, i) => {
                if (i === index - 1) {
                    page.classList.remove('hidden');
                    page.classList.add('opacity-100');
                    // Check for special page effects
                    if (index === 1) {
                         startHearts();
                    } else {
                        stopHearts();
                    }
                    if (index === 3) {
                        launchConfetti(); // Start confetti on page 3
                    } else {
                        stopConfetti();
                    }
                } else {
                    page.classList.add('hidden');
                    page.classList.remove('opacity-100');
                }
            });
        }

        function nextPage(index) {
            // Ensure Tone.start() is called on user interaction and music starts
            if (!isMusicPlaying && index > 1) {
                Tone.start().then(startMusic);
            }
            showPage(index);
        }

        // --- Page 1: Heart Sprinkling Animation ---
        let heartInterval;
        const heartContainer = document.getElementById('app');

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = '<i class="fas fa-heart"></i>'; // Font Awesome heart icon

            // Random position and animation properties
            const xPos = Math.random() * 100 + 'vw';
            const xEnd = (Math.random() - 0.5) * 50 + 'px'; // slight horizontal drift
            const delay = Math.random() * 2 + 's';
            const duration = 4 + Math.random() * 2 + 's';

            heart.style.left = xPos;
            heart.style.animationDelay = delay;
            heart.style.animationDuration = duration;
            heart.style.setProperty('--x-end', xEnd);

            heartContainer.appendChild(heart);

            // Clean up old hearts after their animation finishes
            setTimeout(() => heart.remove(), 6000);
        }

        function startHearts() {
            if (!heartInterval) {
                heartInterval = setInterval(createHeart, 200);
            }
        }

        function stopHearts() {
            clearInterval(heartInterval);
            heartInterval = null;
        }

        // --- Page 3: Confetti/Crackers Animation ---
        let confettiInterval;
        const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4caf50', '#8bc34a', '#cddc39', '#ffeb3b', '#ffc107', '#ff9800', '#ff5722', '#795548', '#9e9e9e', '#607d8b'];

        function createConfettiPiece() {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');

            const color = colors[Math.floor(Math.random() * colors.length)];
            const size = Math.random() * 10 + 5; // 5px to 15px

            confetti.style.width = `${size}px`;
            confetti.style.height = `${size}px`;
            confetti.style.backgroundColor = color;

            // Start slightly above the viewport
            const xPos = Math.random() * 100 + 'vw';
            confetti.style.left = xPos;

            // Customize animation duration and delay
            const duration = Math.random() * 1.5 + 2.5 + 's';
            const delay = Math.random() * 0.5 + 's';
            confetti.style.animationDuration = duration;
            confetti.style.animationDelay = delay;

            heartContainer.appendChild(confetti);

            setTimeout(() => confetti.remove(), 4000);
        }

        function launchConfetti() {
            if (!confettiInterval) {
                // Burst effect for 2 seconds
                let burstCount = 0;
                confettiInterval = setInterval(() => {
                    for(let i = 0; i < 15; i++) {
                        createConfettiPiece();
                    }
                    burstCount++;
                    if (burstCount > 5) { // Stop the continuous burst after a few cycles
                        clearInterval(confettiInterval);
                        confettiInterval = null;
                    }
                }, 400);
            }
        }

        function stopConfetti() {
            clearInterval(confettiInterval);
            confettiInterval = null;
            // Optionally clear existing confetti from DOM if needed, but the timeout handles it
        }


        // --- Initialization and Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            // Split the text for the wavy animation on all pages
            document.querySelectorAll('.animated-text').forEach(element => {
                const text = element.textContent;
                element.innerHTML = ''; // Clear original content
                text.split('').forEach((char, index) => {
                    const span = document.createElement('span');
                    span.textContent = char;
                    span.style.animationDelay = (index * 0.05) + 's';
                    element.appendChild(span);
                });
            });

            // Set up initial state
            showPage(1);
            startHearts(); // Keep hearts going

            // Button listeners
            document.getElementById('continue-btn').addEventListener('click', () => {
                nextPage(2);
            });

            document.getElementById('leave-btn').addEventListener('click', () => {
                stopMusic();
                alert('No worries! This was just a test of my coding skills. 😉');
                showPage(1);
            });
        });

        // Simple custom alert function as a fallback/example (used above for 'Leave' button)
        function alert(message) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background-color: rgba(0, 0, 0, 0.8); z-index: 9999;
                display: flex; justify-content: center; align-items: center;
            `;

            const box = document.createElement('div');
            box.style.cssText = `
                background-color: white; padding: 30px; border-radius: 15px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); max-width: 80%;
                text-align: center; font-size: 1.2rem;
            `;

            const p = document.createElement('p');
            p.textContent = message;
            p.style.marginBottom = '20px';

            const button = document.createElement('button');
            button.textContent = 'Close';
            button.style.cssText = `
                background-image: linear-gradient(45deg, #ff69b4, #8a2be2); color: white;
                padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer;
                font-weight: bold; transition: transform 0.2s;
            `;
            button.onclick = () => modal.remove();

            box.appendChild(p);
            box.appendChild(button);
            modal.appendChild(box);
            document.body.appendChild(modal);
        }

    </script>
</body>
</html>
